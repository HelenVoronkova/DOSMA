

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; DOSMA v0.0.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FAQs" href="faq.html" />
    <link rel="prev" title="Tissues" href="tissues.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DOSMA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#starting-a-session">Starting A Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-terminal">Command-Line (Terminal)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scans">Scans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tissues">Tissues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis">Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#help">Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#qdess">qDESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cubequant">CubeQuant</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ute-cones">UTE Cones</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mapss">MAPSS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DOSMA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<span id="id1"></span><h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>This page discusses general usage tips, best practices, and work arounds for both command line and graphical user interface (GUI).
Because the GUI is a wrapper around the command line and is typically easier to use, we will focus on detailing how to
use DOSMA from the command line.</p>
<p>The details here assume that <a class="reference internal" href="installation.html#installation"><span class="std std-ref">installation</span></a> and <a class="reference internal" href="installation.html#install-verification"><span class="std std-ref">verification</span></a>
worked as expected.</p>
<div class="section" id="starting-a-session">
<span id="usage-session"></span><h2>Starting A Session<a class="headerlink" href="#starting-a-session" title="Permalink to this headline">¶</a></h2>
<p>To being a session using DOSMA from the command-line or GUI, follow the step below:</p>
<ol class="arabic">
<li><p>Open new Terminal window.</p></li>
<li><p>Activate DOSMA Anaconda environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate dosma_env
</pre></div>
</div>
</li>
<li><p>Run DOSMA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Run DOSMA from command line.
$ dosma &lt;ARGS...&gt;

# Or run DOSMA as a user interface (UI).
$ dosma --app
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="command-line-terminal">
<span id="usage-cli"></span><h2>Command-Line (Terminal)<a class="headerlink" href="#command-line-terminal" title="Permalink to this headline">¶</a></h2>
<p>DOSMA was designed to be a script-friendly library, where wrapper scripts can be used to
execute and parallelize DOSMA computations. As scripting is often done using command-line enabled scripts (bash, shell,
perl, etc.), DOSMA has a command-line interface.</p>
<p>The DOSMA command-line parser hierarchy funnels from scan type to action. Scan types are specified first and are
followed by the action to execute and corresponding arguments. For example, the code below computes T<sub>2</sub> for femoral
cartilage (fc) and patellar cartilage (pc) from qDESS scans:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dosma --dicom subject01/dicoms/qdess --save subject01/data qdess --fc --pc generate_t2_map
</pre></div>
</div>
<p>A more exhaustive coverage of supported actions and analyses for different scans are available in the <a class="reference internal" href="cli.html#cli"><span class="std std-ref">command line documentation</span></a></p>
<div class="section" id="scans">
<h3>Scans<a class="headerlink" href="#scans" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="scans.html#scans"><span class="std std-ref">Scans</span></a> and corresponding actions are specified as subparsers. For example, the code below is the skeleton
for segmenting tissues in qDESS scans:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dosma qdess segment ....
</pre></div>
</div>
</div>
<div class="section" id="tissues">
<h3>Tissues<a class="headerlink" href="#tissues" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="tissues.html#tissues"><span class="std std-ref">Tissues</span></a> are specified as arguments of the subparser using the tissue’s abbreviated name.
For example, <code class="docutils literal notranslate"><span class="pre">...</span> <span class="pre">qdess</span> <span class="pre">--fc</span> <span class="pre">...</span></code> would be performing a qDESS-specific action on femoral cartilage.</p>
<p>To analyze multiple tissues, add additional flags. For example, the argument below
generates a T<sub>2</sub> map for both femoral and patellar cartilage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dosma --dicom subject01/dicoms/qdess --save subject01/data qdess --fc --pc generate_t2_map
</pre></div>
</div>
</div>
<div class="section" id="analysis">
<h3>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h3>
<p>DOSMA also has a command-line subparser for creating visualizations and analyze quantitative values for tissues.
This subparser is identified by the anatomical region being analyzed.</p>
<p>DOSMA currently supports knee-related analyses. To run the analysis on T<sub>2</sub> for femoral cartilage and tibial cartilage, use the following skeleton:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dosma --load subject01/data knee --fc --tc --t2
</pre></div>
</div>
</div>
<div class="section" id="help">
<h3>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h3>
<p>To get more information, start a new session and run <code class="docutils literal notranslate"><span class="pre">dosma</span> <span class="pre">--help</span></code>. To get the help menu of subparsers, add the
subparser name to the help menu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Print high-level help menu for DOSMA.
$ dosma --help

# Print help menu for qDESS scan.
$ dosma qdess --help

# Print help menu for qDESS segmentation.
$ dosma qdess segment --help
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>We detail some examples that could be useful for analyzing data. Note there any any number of combinations with how the
data is analyzed. Below are just examples for how they have commonly been used by current users.</p>
<p>We assume the folder structure looks something like below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>research_data
    ├── patient01
        ├── qdess (qDESS dicoms)
        |    └── I0001.dcm
        |    └── I0002.dcm
        |    └── I0003.dcm
        |    ....
        ├── cubequant (CubeQuant dicoms)
        ├── cones (UTE Cones dicoms)
    ├── patient02
        ├── mapss (MAPSS dicoms)
    ├── patient03
    ├── weights (segmentation weights)
</pre></div>
</div>
<div class="section" id="qdess">
<h4>qDESS<a class="headerlink" href="#qdess" title="Permalink to this headline">¶</a></h4>
<p>Analyze patient01’s femoral cartilage T<sub>2</sub> properties using qDESS sequence*:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># 1. Calculate 3D T2 map - suppress fat and fluid to reduce noise
$ dosma --dicom research_data/patient01/dess --save research_data/patient01/data qdess --fc t2 --suppress_fat --suppress_fluid

# 2. Segment femoral cartilage using root mean square (RMS) of two echo qDESS echos
$ dosma --dicom research_data/patient01/dess --save research_data/patient01/data qdess --fc segment --rms --weights_dir unet_weights

# 3. Calculate/visualize T2 for femoral cartilage
$ dosma --load research_data/patient01/data --save research_data/patient01/data knee --fc --t2
</pre></div>
</div>
</div>
<div class="section" id="cubequant">
<h4>CubeQuant<a class="headerlink" href="#cubequant" title="Permalink to this headline">¶</a></h4>
<p>Analyze patient01 femoral cartilage T<sub>1</sub><span class="math notranslate nohighlight">\({\rho}\)</span> properties using Cubequant sequence:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># 1. Register cubequant volume to first echo of qDESS sequence
$ dosma --dicom research_data/patient01/cubequant --save research_data/patient01/data cubequant --fc interregister --target_path research_data/patient01/data/dess/echo1.nii.gz --target_mask research_data/patient01/data/fc/fc.nii.gz

# 2. Calculate 3D T1-rho map only for femoral cartilage region
$ dosma --load research_data/patient01/data cubequant --fc t1_rho  --mask_path research_data/patient01/data/fc/fc.nii.gz

# 3. Calculate/visualize T1-rho for femoral cartilage
$ dosma --load research_data/patient01/data --fc --t1_rho
</pre></div>
</div>
</div>
<div class="section" id="ute-cones">
<h4>UTE Cones<a class="headerlink" href="#ute-cones" title="Permalink to this headline">¶</a></h4>
<p>Analyze patient01 femoral cartilage T<sub>2</sub><sup>*</sup> properties using UTE Cones sequence:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># 1. Register cones volume to first echo of qDESS sequence
$ dosma --dicom research_data/patient01/cones --save research_data/patient01/data cones --fc interregister --target_path research_data/patient01/data/dess/echo1.nii.gz --target_mask research_data/patient01/data/fc/fc.nii.gz

# 2. Calculate 3D T2-star map only for femoral cartilage region
$ dosma --load research_data/patient01/data cubequant --fc t2_star --mask_path research_data/patient01/data/fc/fc.nii.gz

# 3. Calculate/visualize T1-rho for femoral cartilage
$ dosma --load research_data/patient01/data knee --fc --t2_star
</pre></div>
</div>
</div>
<div class="section" id="mapss">
<h4>MAPSS<a class="headerlink" href="#mapss" title="Permalink to this headline">¶</a></h4>
<p>Analyze patient02 femoral cartilage T<sub>1</sub><span class="math notranslate nohighlight">\({\rho}\)</span> and T<sub>2</sub> properties using MAPSS sequence:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># 1. Fit T1-rho for whole volume
$ dosma --dicom research_data/patient02/mapss --save research_data/patient02/data mapss --fc t1_rho

# 2. Fit T2 for whole volume
$ dosma --dicom research_data/patient02/mapss --save research_data/patient02/data mapss --fc t2

# 3. Manually segment femoral cartilage and store in appropriate folders.

# 4. Calculate/visualize T1-rho and T2 for femoral cartilage
$ dosma --load research_data/patient01/data knee --fc --t2_star
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="FAQs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tissues.html" class="btn btn-neutral float-left" title="Tissues" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Arjun Desai

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>